FROM node:20-bullseye-slim

ENV TZ=${TZ}
ENV BASEPATH=${BASEPATH}
ENV NEXT_PUBLIC_APP_URL=${NEXT_PUBLIC_APP_URL}
ENV NEXT_PUBLIC_DOCS_URL=${NEXT_PUBLIC_DOCS_URL}
ENV NEXTAUTH_BASEPATH=${NEXTAUTH_BASEPATH}
ENV NEXTAUTH_URL=${NEXTAUTH_URL}
ENV NEXTAUTH_SECRET=${NEXTAUTH_SECRET}
ENV NEXTAUTH_SECRET_API_EPHIS=${NEXTAUTH_SECRET_API_EPHIS}
ENV API_URL=${API_URL}
ENV NEXT_PUBLIC_API_URL=${NEXT_PUBLIC_API_URL}
ENV NEXT_PUBLIC_STRAPI_URL=${NEXT_PUBLIC_STRAPI_URL}
ENV NEXT_PUBLIC_TEST_API_URL=${NEXT_PUBLIC_TEST_API_URL}

WORKDIR /

COPY package*.json ./
COPY . .
 

RUN touch .env
RUN npm install

EXPOSE ${PORT}

CMD ["npm", "run", "dev"]
